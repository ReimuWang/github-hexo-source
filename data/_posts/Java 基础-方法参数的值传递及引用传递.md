---
title: Java 基础-方法参数的值传递及引用传递
date: 2017-10-10 16:59:49
tags: [Java,值传递,引用传递]
categories: Java 基础
---

本质上，只有值传递这一种传递方式，所谓的引用传递是值传递的一种。即：

```
// 将2这个值复制一份传递给m
int a = 2;
m(a);

// 将引用o复制一份并将其值传递给m
m(o);
```

<!-- more -->

值传递的核心就在于"复制"。传递的并不是原始数据，而是复制出的，与原始数据相等的东西。因此方法对这个克隆体所做的一切操作都不会影响原始数据。

虽然理论基础是统一的，但是当传递的是引用时，可能会让人产生一些迷茫。这也是为什么很多人将引用传递从值传递中提出来单独论述的原因。例如：

```
O o = new O();
m(o);
```

执行m(o)时，会复制出一份引用o的副本o_c并将其传递给m。自此o与o_c就是两个完全独立的个体，不会再有任何瓜葛。但是问题在于，初始时，因为o_c是o的副本，因此其空间中存放的对象地址必然与o相同。进而，如果m中有如下操作：

```
o = new O();
```

此举相当于将o_c中存放的对象地址指向了一个新的对象。而由于o与o_c已完全独立，因此并不会导致o中存放的对象地址发生变化。

但是，如果我们在m中做如下操作：

```
o.setName("八云紫");
```

此时o_c并没有修改其内部存放的对象地址，而是直接操作了该对象中的数据。对此o中存放的对象地址依然没有发生变化，但由于其所存放的对象本身被o_c的操作所修改，看起来仿佛是传递进方法的引用影响了原始引用一样。但是即便如此，o_c也没有真正修改o中存储的值。

举一个生活中的小例子：小王手中有一个神秘网站的网址，从这个网站可以下载神奇的影片。本质上，小王所拥有的并非网站本身，而仅仅是网址这个字符串。小刘抄到了这个网址，那么无论小刘做什么事，对小王所拥有的那个字符串都不会造成影响。注意：这里所说的不会被影响的事物是小王的"网址字符串"。若小刘仅仅只是修改他拿到的网址为另一个网址，那么对小王完全没影响。如果小刘因为没钱充会员导致无法下载神奇的影片而一怒之下黑进了这个网站并将其中的影片全部换成了金刚葫芦娃，那么小王也无法在这个网站下载神奇的影片了。此时，小李所改变的是网站本身，并不是小王所持有的网址字符串。