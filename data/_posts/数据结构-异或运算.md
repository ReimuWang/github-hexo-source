---
title: 数据结构-异或运算
date: 2018-05-24 16:19:49
tags: [数据结构,异或]
categories: 数据结构
---

# 基本定义

异或(exclusive OR)是一种二元位运算运算符，计算机学中的常用缩写为xor，计算时的符号为^。

参与位运算的数字只有0,1两种，而异或又是一种二元运算符，因此所有的运算情况只有如下4种：

```
0^0=0
1^0=1
0^1=1
1^1=0
```

用自然语言描述一下就是：相同的返回0，不同的返回1。这也是"异或"这个名称的由来。

<!-- more -->

# 性质

**异或满足交换率**

穷举法即可：

```
0^0=0^0=0
1^0=0^1=1
1^1=1^1=0
```

---

**任何数异或0后保持不变**

**证明：**

穷举法即可：

```
0^0=0
1^0=1
```

---

**任何数异或1后取反**

**证明：**

穷举法即可：

```
0^1=1
1^1=0
```

---

**任何数异或自身后变为0**

**证明：**

穷举法即可：

```
0^0=0
1^1=0
```

# 应用：原地交换两个整数

需求：现有两个整数a,b。需交换它们之中存储的值。

最简单，也是最易于想到的方法自然就是再声明一个临时的中转变量了：

```
int temp = a;
a = b;
b = temp;
```

不过这种做法并不是原地的，我们还使用了额外的空间存储temp。

如果想要原地完成这个需求，可以使用异或操作：

```
a = a ^ b;
b = a ^ b;
a = a ^ b;
```

经过这样的操作后，a与b中的值就被交换过来了。

看起来挺玄乎的。下面我们具体来求证一下。

首先是第一步：

```
a = a ^ b;
```

经过这步操作后a变为了a^b，b依然还是b。如果我们以原值来算的话，第二步的运算其实是这样的：

```
b = a ^ b ^ b
```

因异或满足交换律，如果我们将a看作一个整体，b^b看作一个整体的话，上式可变为：

```
b = b ^ b ^ a
```

又因为任何数异或自身后变为0，因此上式可进一步化简为：

```
b = 0 ^ a = a ^ 0
```

又因为任何数异或0后保持不变，则最终可化简为：

```
b = a
```

即经过第二步的运算后，b中存储的值已经是a了。

然后我们再来看第三步，此时实际的运算是：

```
a = a ^ b ^ a = a ^ a ^ b = 0 ^ b = b ^ 0 = b
```

证明思路与第二步时类似，我们就不写具体的推导过程了。

至此，a与b完成了值的交换。